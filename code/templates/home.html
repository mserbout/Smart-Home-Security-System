{% extends 'base.html' %}

{% block title %}Home - My Website{% endblock %}

{% block content %}
<link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='home.css') }}">

<h1>Welcome to Smart Home Security System</h1>

{% if is_admin %}
<h1>Manage Houses</h1>

<form method="POST" action="{{ url_for('add_house') }}">
    <input type="text" name="house_name" placeholder="Enter house name" required>
    <button type="submit">Add House</button>
</form>

<h2>Existing Houses</h2>
<ul>
    {% for house in houses %}
    <li>
        {{ house }}
        <form method="POST" action="{{ url_for('delete_house', house_name=house) }}" style="display:inline;">
            <button type="submit">Delete</button>
        </form>
    </li>
    {% endfor %}
</ul>
{% endif %}

{% if is_admin %}
<div>
    <label for="select-house">Select a House:</label>
    <select id="select-house" name="house" onchange="location.href = '{{ url_for('home') }}?house_name=' + this.value;">
        <option value="">Select a house</option>
        {% for house in houses %}
        <option value="{{ house }}" {% if house == selected_house %}selected{% endif %}>{{ house }}</option>
        {% endfor %}
    </select>
</div>
{% endif %}

<h2>House Data</h2>

{% if measurements %}
<table>
    <tr>
        <th>ID</th>
        <th>Temperature</th>
        <th>Humidity</th>
        <th>Motion Detection</th>
        <th>Longitude</th>
        <th>Latitude</th>
        <th>Time</th>
    </tr>
    {% for measurement in measurements %}
    <tr>
        <td>{{ measurement.id }}</td>
        <td>{{ measurement.temperature }}</td>
        <td>{{ measurement.humidity }}</td>
        <td>{{ measurement.motionDetection }}</td>
        <td>{{ measurement.longitude }}</td>
        <td>{{ measurement.latitude }}</td>
        <td>{{ measurement.time }}</td>
    </tr>
    {% endfor %}
</table>
{% else %}
<p>No data available for the selected house.</p>
{% endif %}
{% endblock %}
